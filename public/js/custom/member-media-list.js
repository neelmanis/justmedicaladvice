$(document).ready(function(){getMedia(1);$("#load_more").click(function(e){e.preventDefault();var page=$(this).data('val');getMedia(page)});$("#searchText").keyup(function(){$('body').click(function(){$(".suggestion_dd").css("display","none")});var value=$("#searchText").val().trim();var length=value.length;var searchKey=value.slice(0);if(length>0){$.ajax({type:"POST",data:{searchKey:searchKey},url:CI_ROOT+"media/search",success:function(result){if(result==1){$(".suggestion_dd").css("display","none")}else{$(".suggestion_dd").css("display","block");$(".suggestion_dd").html(result)}}})}else{$(".suggestion_dd").css("display","none")}});$("#postForum").click(function(e){e.preventDefault();var formdata=$("#ask_question").serialize();$.ajax({type:"POST",url:CI_ROOT+"forum/addMemberForumAction",data:formdata,beforeSend:function(){$("#pageLoader").show()},success:function(result){if(result==1){swal({title:"Successful !",icon:"success",text:"Forum is created."}).then(function(){location.href=CI_ROOT+"forum/listall"})}else if(result==2){swal({title:"Error !",icon:"error",text:"Forum Already Exist."}).then(function(){$("#pageLoader").hide()})}else{$("#formError").css("display","block");$('html, body').animate({scrollTop:$("#formError").offset().top-170},200);$("#formError").html(result).delay(5000).fadeOut();$("#pageLoader").hide()}}})})});var getMedia=function(page){$("#pageLoader").show();var searchCat=$("#cat").val();var searchSub=$("#searchSubmit").val();$.ajax({url:CI_ROOT+"media/getMediaList",type:'GET',data:{page:page,searchCat:searchCat,searchSubmited:searchSub}}).done(function(response){if(response==1){$('#load_more').attr('disabled',!0);$('#load_more').html('No More Data');$("#pageLoader").hide()}else{$("#result").append(response);$("#pageLoader").hide();$('#load_more').data('val',($('#load_more').data('val')+1))}})};function addMediaLike(id){$.ajax({type:"POST",url:CI_ROOT+"media/mediaLikeAction",data:{mediaId:id},beforeSend:function(){$("#pageLoader").show()},success:function(result){if(result==1){$("#"+id).removeClass("thank");$("#"+id).addClass("thanked");$("#pageLoader").hide()}else if(result==2){$("#"+id).removeClass("thanked");$("#"+id).addClass("thank");$("#pageLoader").hide()}else{swal(result);$("#pageLoader").hide()}}})}