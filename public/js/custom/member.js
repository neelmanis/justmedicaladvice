$(document).ready(function(){$('form').attr('autocomplete','off');$("#memberPasswordChange").validate({rules:{oldPassword:"required",newPassword:{required:!0,},cnfNewPassword:{required:!0,equalTo:"#newPassword"}},messages:{oldPassword:{required:"Please Enter Your Old Password"},newPassword:{required:"Please Enter Your New Password"},cnfNewPassword:{required:"Please Confirm Your New Password"}},submitHandler:function(form){var formdata=$("#memberPasswordChange").serialize();$.ajax({type:"POST",data:formdata,url:CI_ROOT+"member/changePasswordAction",beforeSend:function(){$("#pageLoader").show()},success:function(result){if(result==1){$("#pageLoader").hide();$("#memberPasswordChange")[0].reset();$("#formSuccess").css("display","block");$("#formSuccess").html('Your Password Has Been Changed !!').delay(5000).fadeOut();window.location.href=CI_ROOT+"member/home"}else{$("#pageLoader").hide();$("#formError").css("display","block");$("#formError").html(result).delay(5000).fadeOut()}}})}});$("#editProfile").validate({rules:{email:{email:!0},name:{required:!0},age:{required:!0},gender:{required:!0},city:{required:!0}},messages:{email:{email:"Please Enter a Valid Email"},name:{required:"Please Enter Your Name"},age:{required:"Please Select Your Age"},gender:{required:"Please Select Your Gender"},city:{required:"Please Enter Your Location"}},submitHandler:function(form){var formdata=new FormData(form);$.ajax({type:"POST",data:formdata,url:CI_ROOT+"member/editProfileAction",processData:!1,contentType:!1,mimeType:'multipart/form-data',beforeSend:function(){$("#pageLoader").show()},success:function(result){if(result==1){swal({title:"Profile Updated!",icon:"success",text:"Your profile successfully updated."}).then(function(){location.reload(!0)})}else{$("#pageLoader").hide();$(window).scrollTop(0);$("#formError").css("display","block");$("#formError").html(result).delay(2000).fadeOut()}}})}});$("#height, #weight").keyup(function(){var weight=$("#weight").val();var height=$("#height").val();if(weight==0||weight==''||height==0||height==''){$("#bmiResult").html('<span style="color:red;"><b>Height & weight required to calculate BMI.</b></span>')}else{var bmi=weight/((height/100)*(height/100));var bmi=bmi.toFixed(2);if(bmi<18.5){$("#bmiResult").html('<span style="color:red;"><b>Underweight.</b></span>')}else if(bmi>18.5&&bmi<24.9){$("#bmiResult").html('<span style="color:green;"><b>Healthy.</b></span>')}else if(bmi>25&&bmi<29.9){$("#bmiResult").html('<span style="color:orange;"><b>Overweight.</b></span>')}else if(bmi>30){$("#bmiResult").html('<span style="color:red;"><b>Obese.</b></span>')}
$("#bmi").val(bmi)}});$("#fileupload").change(function(){if(typeof(FileReader)!="undefined"){var dvPreview=$("#imgPreview");dvPreview.html("");var regex=/^([a-zA-Z0-9\s_\\.\-:])+(.jpg|.jpeg|.gif|.png|.bmp)$/;$($(this)[0].files).each(function(){var file=$(this);if(regex.test(file[0].name.toLowerCase())){var reader=new FileReader();reader.onload=function(e){var img=$("<img />");img.attr("src",e.target.result);dvPreview.append(img)}
reader.readAsDataURL(file[0])}else{alert(file[0].name+" is not a valid image file.");dvPreview.html("");return!1}})}else{alert("This browser does not support HTML5 FileReader.")}})})