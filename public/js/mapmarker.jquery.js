(function($){$.fn.mapmarker=function(options){var opts=$.extend({},$.fn.mapmarker.defaults,options);return this.each(function(){var map_element=this;addMapMarker(map_element,opts.zoom,opts.center,opts.markers)})};var defaultMarkers={"markers":[]};$.fn.mapmarker.defaults={zoom:4,center:'india',markers:defaultMarkers}
function addMapMarker(map_element,zoom,center,markers){var myOptions={zoom:zoom,mapTypeId:google.maps.MapTypeId.ROADMAP}
var map=new google.maps.Map(map_element,myOptions);var geocoder=new google.maps.Geocoder();var infowindow=null;var baloon_text="";geocoder.geocode({'address':center},function(results,status){if(status==google.maps.GeocoderStatus.OK){map.setCenter(results[0].geometry.location)}
else{console.log("Geocode was not successful for the following reason: "+status)}});$.each(markers.markers,function(i,the_marker){latitude=the_marker.latitude;longitude=the_marker.longitude;icon=the_marker.icon;var baloon_text=the_marker.baloon_text;if(latitude!=""&&longitude!=""){var marker=new google.maps.Marker({map:map,position:new google.maps.LatLng(latitude,longitude),animation:google.maps.Animation.DROP,icon:icon});google.maps.event.addListener(marker,'click',function(){if(infowindow){infowindow.close()}
infowindow=new google.maps.InfoWindow({content:baloon_text});infowindow.open(map,marker)})}})}})(jQuery)